<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pong Arcade</title>
<style>
    body {
        background-color: #000;
        margin: 0;
        font-family: Arial, sans-serif;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
    }
    canvas {
        background-color: #111;
        box-shadow: 0 0 20px #fff;
        display: block;
    }
    #menu {
        position: absolute;
        text-align: center;
        top: 20%;
        width: 100%;
    }
    .btn {
        background: #222;
        border: 2px solid #fff;
        padding: 10px 20px;
        margin: 10px;
        color: white;
        font-size: 20px;
        cursor: pointer;
        transition: 0.2s;
    }
    .btn:hover {
        background: #fff;
        color: #222;
    }
</style>
</head>
<body>
<div id="menu">
    <h1>Pong Arcade</h1>
    <p>Choisis la difficult√© :</p>
    <button class="btn" onclick="startGame('easy')">Facile</button>
    <button class="btn" onclick="startGame('medium')">Moyen</button>
    <button class="btn" onclick="startGame('hard')">Difficile</button>
</div>
<canvas id="pong" width="800" height="400"></canvas>

<script>
// Canvas
const canvas = document.getElementById("pong");
const ctx = canvas.getContext("2d");

// Game state
let gameStarted = false;
let gameOver = false;
let aiDifficulty = 'medium';

// Ball with trail
const ball = {
    x: canvas.width/2,
    y: canvas.height/2,
    radius: 10,
    speed: 5,
    dx: 5,
    dy: 5,
    color: "white",
    trail: []
};

// Paddles
const paddleWidth = 10;
const paddleHeight = 100;

const player = { x: 0, y: canvas.height/2 - paddleHeight/2, width: paddleWidth, height: paddleHeight, dy:0, speed:6, score:0, glow:false };
const ai = { x: canvas.width - paddleWidth, y: canvas.height/2 - paddleHeight/2, width: paddleWidth, height: paddleHeight, speed:4, score:0, glow:false };

// Sounds
const bounceSound = new Audio("https://freesound.org/data/previews/341/341695_3248244-lq.mp3");
const scoreSound = new Audio("https://freesound.org/data/previews/66/66717_931655-lq.mp3");
const wallSound = new Audio("https://freesound.org/data/previews/274/274178_5121236-lq.mp3");

// Helpers
function randomColor(){ return `hsl(${Math.random()*360},100%,70%)`; }
function drawRect(x,y,w,h,color,glow=false){
    ctx.fillStyle=color;
    ctx.shadowColor = glow ? "#fff" : color;
    ctx.shadowBlur = glow ? 15 : 0;
    ctx.fillRect(x,y,w,h);
    ctx.shadowBlur = 0;
}
function drawCircle(x,y,r,color){ ctx.fillStyle=color; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.closePath(); ctx.fill(); }
function drawText(text,x,y){ ctx.fillStyle="white"; ctx.font="28px Arial"; ctx.fillText(text,x,y); }
function drawSpeed(){ drawText(`Vitesse: ${ball.speed.toFixed(1)}`, canvas.width/2 - 60, 30); }

// Reset ball
function resetBall(){
    ball.x = canvas.width/2; ball.y = canvas.height/2; ball.speed = 5;
    ball.dx = 5*(Math.random()>0.5?1:-1);
    ball.dy = 5*(Math.random()>0.5?1:-1);
    ball.color = "white";
    ball.trail = [];
}

// Start game with difficulty
function startGame(difficulty){
    aiDifficulty = difficulty;
    const speeds = { easy:3, medium:4, hard:6 };
    ai.speed = speeds[difficulty];
    document.getElementById("menu").style.display = "none";
    gameStarted = true;
    gameOver = false;
    player.score=0; ai.score=0;
    resetBall();
}

// Update game
function update(){
    if(!gameStarted || gameOver) return;

    // Move ball
    ball.x += ball.dx; ball.y += ball.dy;

    // Add to trail
    ball.trail.push({x:ball.x, y:ball.y, color:ball.color});
    if(ball.trail.length>15) ball.trail.shift();

    // Collisions top/bottom
    if(ball.y+ball.radius>canvas.height || ball.y-ball.radius<0){
        ball.dy=-ball.dy;
        ball.color=randomColor();
        wallSound.play();
    }

    // Collisions paddles
    player.glow=false; ai.glow=false;
    if(ball.x-ball.radius<player.x+player.width && ball.y>player.y && ball.y<player.y+player.height){
        ball.dx=-ball.dx; ball.speed+=0.5;
        ball.dx = (ball.dx>0?1:-1)*ball.speed; ball.dy = (ball.dy>0?1:-1)*ball.speed;
        ball.color=randomColor();
        player.glow=true;
        bounceSound.play();
    }
    if(ball.x+ball.radius>ai.x && ball.y>ai.y && ball.y<ai.y+ai.height){
        ball.dx=-ball.dx; ball.speed+=0.5;
        ball.dx = (ball.dx>0?1:-1)*ball.speed; ball.dy = (ball.dy>0?1:-1)*ball.speed;
        ball.color=randomColor();
        ai.glow=true;
        bounceSound.play();
    }

    // Score
    if(ball.x<0){ ai.score++; scoreSound.play(); resetBall(); }
    if(ball.x>canvas.width){ player.score++; scoreSound.play(); resetBall(); }

    // Check end
    if(player.score>=5 || ai.score>=5){ gameOver=true; gameStarted=false; document.getElementById("menu").style.display="block"; }

    // Move player
    player.y += player.dy;
    if(player.y<0) player.y=0;
    if(player.y+player.height>canvas.height) player.y=canvas.height-player.height;

    // AI movement
    if(ai.y+ai.height/2<ball.y){ ai.y+=ai.speed; } else { ai.y-=ai.speed; }
}

// Draw everything
function draw(){
    // Background
    ctx.fillStyle="#111";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Ball trail
    for(let i=0;i<ball.trail.length;i++){
        const t = ball.trail[i];
        ctx.globalAlpha = i/ball.trail.length *0.5;
        drawCircle(t.x, t.y, ball.radius, t.color);
    }
    ctx.globalAlpha =1;

    drawRect(player.x,player.y,player.width,player.height,"#0f0",player.glow);
    drawRect(ai.x,ai.y,ai.width,ai.height,"#f00",ai.glow);
    drawCircle(ball.x,ball.y,ball.radius,ball.color);

    drawText(player.score, canvas.width/4, 50);
    drawText(ai.score, canvas.width*3/4, 50);
    drawSpeed();
}

// Controls
document.addEventListener("keydown", e=>{
    if(e.key==="ArrowUp") player.dy=-player.speed;
    if(e.key==="ArrowDown") player.dy=player.speed;
});
document.addEventListener("keyup", e=>{
    if(e.key==="ArrowUp"||e.key==="ArrowDown") player.dy=0;
});

// Game loop
function gameLoop(){ update(); draw(); requestAnimationFrame(gameLoop); }
gameLoop();
</script>
</body>
</html>




